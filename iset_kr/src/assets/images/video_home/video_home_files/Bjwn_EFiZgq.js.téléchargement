;/*FB_PKG_DELIM*/

__d("BrowserSupportCore",["getVendorPrefixedName"],(function(t,n,r,o,a,i){"use strict";var e={hasCSSAnimations:function(){return!!n("getVendorPrefixedName")("animationName")},hasCSSTransforms:function(){return!!n("getVendorPrefixedName")("transform")},hasCSS3DTransforms:function(){return!!n("getVendorPrefixedName")("perspective")},hasCSSTransitions:function(){return!!n("getVendorPrefixedName")("transition")}},l=e;i.default=l}),66);
__d("BrowserSupport",["BrowserSupportCore","ExecutionEnvironment","UserAgent_DEPRECATED","getVendorPrefixedName","memoize"],(function(t,n,r,o,a,i,l){var e,s,u,c=null;function d(){return(u||(u=r("ExecutionEnvironment"))).canUseDOM?(c||(c=document.createElement("div")),c):null}var m=function(t){return r("memoize")(function(){var e=d();return e?t(e):!1})},p=m(function(e){return e.style.cssText="position:-moz-sticky;position:-webkit-sticky;position:-o-sticky;position:-ms-sticky;position:sticky;",/sticky/.test(e.style.position)}),_=m(function(e){return"scrollSnapType"in e.style||"webkitScrollSnapType"in e.style||"msScrollSnapType"in e.style}),f=m(function(e){return"scrollBehavior"in e.style}),g=m(function(e){return"pointerEvents"in e.style?(e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"):!1}),h=(e=r("memoize"))(function(){return!(o("UserAgent_DEPRECATED").webkit()&&!o("UserAgent_DEPRECATED").chrome()&&o("UserAgent_DEPRECATED").windows())&&"FileList"in window&&"FormData"in window}),y=e(function(){return!!t.blob}),C=e(function(){return(u||(u=r("ExecutionEnvironment"))).canUseDOM&&"createElementNS"in document&&document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString().includes("SVGForeignObject")}),b=e(function(){return!!window.MutationObserver}),v=e(function(){var e={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd"},t=r("getVendorPrefixedName")("transition");return e[t]||null}),S=function(){return!!window.CanvasRenderingContext2D};l.hasCSSAnimations=(s=r("BrowserSupportCore")).hasCSSAnimations,l.hasCSSTransforms=s.hasCSSTransforms,l.hasCSS3DTransforms=s.hasCSS3DTransforms,l.hasCSSTransitions=s.hasCSSTransitions,l.hasPositionSticky=p,l.hasScrollSnapPoints=_,l.hasScrollBehavior=f,l.hasPointerEvents=g,l.hasFileAPI=h,l.hasBlobFactory=y,l.hasSVGForeignObject=C,l.hasMutationObserver=b,l.getTransitionEndEvent=v,l.hasCanvasRenderingContext2D=S}),98);
__d("DOMControl",["$","DataStore"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this.root=n("$").fromIDOrElement(e),this.updating=!1,n("DataStore").set(e,"DOMControl",this)}var t=e.prototype;return t.getRoot=function(){return this.root},t.beginUpdate=function(){return this.updating?!1:(this.updating=!0,!0)},t.endUpdate=function(){this.updating=!1},t.update=function(t){if(!this.beginUpdate())return this;this.onupdate(t),this.endUpdate()},t.onupdate=function(t){},e.getInstance=function(t){return n("DataStore").get(t,"DOMControl")},e})();a.exports=e}),null);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(t,n,r,o,a,i,l){function e(e){return!/\S/.test(e||"")}function s(t){return e(t.value)}function u(e){return s(e)?"":e.value}function c(e){return e.value}function d(e,t){e.value=t||"";var n=r("DOMControl").getInstance(e);n&&n.resetHeight&&n.resetHeight()}function m(e,t){t||(t=""),e.setAttribute("aria-label",t),e.setAttribute("placeholder",t)}function p(e){e.value="",e.style.height=""}function _(e,t){o("CSS").conditionClass(e,"enter_submit",t)}function f(e){return o("CSS").hasClass(e,"enter_submit")}function g(e,t){t>0?e.setAttribute("maxlength",t.toString()):e.removeAttribute("maxlength")}l.isWhiteSpaceOnly=e,l.isEmpty=s,l.getValue=u,l.getValueRaw=c,l.setValue=d,l.setPlaceholder=m,l.reset=p,l.setSubmitOnEnter=_,l.getSubmitOnEnter=f,l.setMaxLength=g}),98);
__d("Form",["DOM","DOMQuery","DTSG","DTSGUtils","DataStore","FBLogger","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(t,n,r,o,a,i,l){var e,s,u="FileList"in window,c="FormData"in window;function d(t){var n={};return(e||(e=r("PHPQuerySerializer"))).serialize(t).split("&").forEach(function(e){if(e){var t=/^([^=]*)(?:=(.*))?$/.exec(e),o=(s||(s=r("URI"))).decodeComponent(t[1]),a=t[2]!==void 0,i=a?(s||(s=r("URI"))).decodeComponent(t[2]):null;n[o]=i}}),n}var m={getInputs:function(t){return t===void 0&&(t=document),[].concat(o("DOMQuery").scry(t,"input"),o("DOMQuery").scry(t,"select"),o("DOMQuery").scry(t,"textarea"),o("DOMQuery").scry(t,"button"))},getInputsByName:function(t){var e={};return m.getInputs(t).forEach(function(t){var n=e[t.name];e[t.name]=n===void 0?t:[t].concat(n)}),e},getSelectValue:function(t){return t.options[t.selectedIndex].value},setSelectValue:function(t,n){for(var e=0;e<t.options.length;++e)if(t.options[e].value===n){t.selectedIndex=e;break}},getRadioValue:function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e].value;return null},getElements:function(t){return t.tagName==="FORM"&&t.elements!==t?Array.from(t.elements):m.getInputs(t)},getAttribute:function(t,n){return(t.getAttributeNode(n)||{}).value||null},setDisabled:function(t,n){m.getElements(t).forEach(function(e){if(e.disabled!==void 0){var t=r("DataStore").get(e,"origDisabledState");n?(t===void 0&&r("DataStore").set(e,"origDisabledState",e.disabled),e.disabled=n):t===!1&&(e.disabled=!1)}})},forEachValue:function(t,n,r){m.getElements(t).forEach(function(e){if(!(!e.name||e.disabled)&&e.type!=="submit"&&!(e.type==="reset"||e.type==="button"||e.type==="image")&&!((e.type==="radio"||e.type==="checkbox")&&!e.checked)){if(e.nodeName==="SELECT"){for(var t=0,n=e.options.length;t<n;t++){var a=e.options[t];a.selected&&r("select",e.name,a.value)}return}if(e.type==="file"){if(u)for(var i=e.files,l=0;l<i.length;l++)r("file",e.name,i.item(l));return}r(e.type,e.name,o("Input").getValue(e))}}),n&&n.name&&n.type==="submit"&&o("DOMQuery").contains(t,n)&&o("DOMQuery").isNodeOfType(n,["input","button"])&&r("submit",n.name,n.value)},createFormData:function(t,n){if(!c)return null;var e=new FormData;if(t)if(r("isNode")(t))m.forEachValue(t,n,function(t,n,r){e.append(n,r)});else{var o=d(t);for(var a in o)o[a]==null?e.append(a,""):e.append(a,o[a])}return e},serialize:function(t,n){var e={};return m.forEachValue(t,n,function(t,n,r){t!=="file"&&m._serializeHelper(e,n,r)}),m._serializeFix(e)},_serializeHelper:function(t,n,r){var e=Object.prototype.hasOwnProperty,o=/([^\]]+)\[([^\]]*)\](.*)/.exec(n);if(o){if(!t[o[1]]||!e.call(t,o[1])){var a;if(t[o[1]]=a={},t[o[1]]!==a)return}var i=0;if(o[2]==="")for(;t[o[1]][i]!==void 0;)i++;else i=o[2];o[3]===""?t[o[1]][i]=r:m._serializeHelper(t[o[1]],i.concat(o[3]),r)}else t[n]=r},_serializeFix:function(t){for(var e in t)t[e]instanceof Object&&(t[e]=m._serializeFix(t[e]));var n=Object.keys(t);if(n.length===0||n.some(isNaN))return t;n.sort(function(e,t){return e-t});var r=0,o=n.every(function(e){return+e===r++});return o?n.map(function(e){return t[e]}):t},post:function(t,n,a,i){i===void 0&&(i=!0);var e=new(s||(s=r("URI")))(t),l=document.createElement("form");l.action=e.toString(),l.method="POST",l.style.display="none";var u=!r("isFacebookURI")(e);if(a){if(u&&(l.rel="noreferrer",a==="_blank")){a=btoa(r("Random").uint32());var c=window.open("about:blank",a);c!==void 0&&(c.opener=null)}l.target=a}if(i&&!u&&e.getSubdomain()!=="apps"){var d=o("DTSG").getToken();d&&(n.fb_dtsg=d,r("SprinkleConfig").param_name&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(d))),r("LSD").token&&(n.lsd=r("LSD").token,r("SprinkleConfig").param_name&&!d&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(r("LSD").token)))}return m.createHiddenInputs(n,l),o("DOMQuery").getRootElement().appendChild(l),l.submit(),!1},post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES:function(t,n,r){m.post(t,n,r)},createHiddenInputs:function(t,n,o,a){a===void 0&&(a=!1),o=o||{};var e=d(t);for(var i in e)if(e[i]!==null)if(o[i]&&a)o[i].value=e[i];else{var l=r("DOM").create("input",{type:"hidden",name:i,value:e[i]});o[i]=l,n.appendChild(l)}return o},getFirstElement:function(t,n){n===void 0&&(n=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);for(var e=[],a=0;a<n.length;a++){e=o("DOMQuery").scry(t,n[a]);for(var i=0;i<e.length;i++){var l=e[i];try{var s=r("getElementPosition")(l);if(s.y>0&&s.x>0)return l}catch(e){}}}return null},focusFirst:function(t){var e=m.getFirstElement(t);return e?(e.focus(),!0):!1}};i.exports=m}),34);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){var n;return n=e.call(this)||this,n._allowCrossOrigin=!1,n._allowCrossPageTransition=!1,n._customHeader={},n._inFlight=!1,n._limit=10,n._option={},n._preventDefaultErrorHandler=!1,n._suspended=!1,t&&n.setURI(t),n.setNetworkErrorRetryLimit(0),n}babelHelpers.inheritsLoose(t,e),t.parseFiles=function(t){var e={};return r("forEachObject")(t,function(t,n){if(Array.isArray(t))e[n]=t;else if(e[n]=[],t instanceof window.FileList)for(var r=0;r<t.length;r++)e[n].push(t.item(r));else(t instanceof window.File||t instanceof window.Blob)&&e[n].push(t)}),e};var n=t.prototype;return n.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},n.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},n.setCustomHttpHeader=function(t,n){return this._customHeader[t]=n,this},n.setData=function(t){return this._data=t,this},n.setOption=function(t,n){return this._option[t]=n,this},n.setPreventDefaultErrorHandler=function(t){return this._preventDefaultErrorHandler=t,this},n.setLimit=function(t){return this._limit=t,this},n.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},n.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},n.setRelativeTo=function(t){return this._relativeTo=t,this},n.setStatusElement=function(t){return this._statusElement=t,this},n.setURI=function(t){return this._uri=t,this},n.suspend=function(){return this._suspended=!0,this},n.resume=function(){return this._suspended=!1,this._processQueue(),this},n.isUploading=function(){return this._inFlight},n._createFileUpload=function(t,n,r){return new s(t,n,r)},n._processQueue=function(){var e=this;if(!this._suspended)for(;this._pending.length<this._limit&&this._waiting.length;){var t=this._waiting.shift(),n=this._preprocessHandler;n?n(t,function(t){return e._processUpload(t)}):this._processUpload(t),this._pending.push(t)}},n._processUpload=function(t){var e=this,n=o("Form").createFormData(t.getData()||this._data);if(t.getFile()){n.append(t.getName(),t.getFile());var a=t.getFile().uploadID;a&&n.append("upload_id",a),t.getAdditionalData().forEach(function(e,t){return n.append(t,e)})}var i=new(r("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(n).setStatusElement(this._statusElement).setHandler(function(n){return e._success(t,n)}).setErrorHandler(function(n){return e._failure(t,n)}).setUploadProgressHandler(function(n){return e._progress(t,n)}).setInitialHandler(function(){return e._initial(t)});for(var l in this._option)i.setOption(l,this._option[l]);for(var s in this._customHeader)i.setRequestHeader(s,this._customHeader[s]);this._relativeTo&&i.setRelativeTo(this._relativeTo),i.send(),t.setAsyncRequest(i),this._inFlight=!0,t.getRetryCount()||this.inform("start",t)},n._abort=function(t){this._pending.indexOf(t)!==-1&&(r("removeFromArray")(this._pending,t),this._processQueue()),r("removeFromArray")(this._waiting,t),t.abort()},n._initial=function(t){t.isAborted()||this.inform("initial",t)},n._success=function(t,n){if(t.isAborted()){this.inform("success_after_abort",n);return}this._complete(t),this.inform("success",t.handleSuccess(n)),this._processQueue()},n._retryUpload=function(t){t.increaseRetryCount(),this._processUpload(t)},n._failure=function(t,n){if(!t.isAborted()){if(n.error===1004&&t.getRetryCount()<(this._retryLimit||0))return this._retryUpload(t);this._complete(t),this.inform("failure",t.handleFailure(n))!==!1&&(this._preventDefaultErrorHandler||r("AsyncResponse").defaultErrorHandler(n)),this._processQueue()}},n._progress=function(t,n){t.isAborted()||this.inform("progress",t.handleProgress(n))},n._complete=function(t){r("removeFromArray")(this._pending,t),this._pending.length||(this._inFlight=!1)},t.isSupported=function(){return o("BrowserSupport").hasFileAPI()},t})(r("mixin")(r("ArbiterMixin"))),s=(function(){function e(e,t,n){this._additionalData=new Map,this._success=null,this._response=null,this._progressEvent=null,this._request=null,this._numRetries=0,this._aborted=!1,this._name=e,this._file=t,this._data=n}var t=e.prototype;return t.getName=function(){return this._name},t.getFile=function(){return this._file},t.setFile=function(t){this._file=t},t.getData=function(){return this._data},t.getAdditionalData=function(){return this._additionalData},t.isComplete=function(){return this._success!==null},t.isSuccess=function(){return this._success===!0},t.getResponse=function(){return this._response},t.getProgressEvent=function(){return this._progressEvent},t.setAsyncRequest=function(t){return this._request=t,this},t.increaseRetryCount=function(){return this._numRetries++,this},t.getRetryCount=function(){return this._numRetries},t.isWaiting=function(){return!this._request},t.isAborted=function(){return this._aborted},t.abort=function(){this._request=null,this._aborted=!0},t.handleSuccess=function(t){return this._success=!0,this._response=t,this._progressEvent=null,this},t.handleFailure=function(t){return this._success=!1,this._response=t,this._progressEvent=null,this},t.handleProgress=function(t){return this._progressEvent=t,this},e})();l.default=e}),98);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t._files=null,t._uploads=[],t._fileLessUpload=null,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.setFiles=function(t){return this._files=r("AsyncUploadBase").parseFiles(t),this},n.setAlwaysReturnResponse=function(t){this._shouldAlwaysReturnResponse=t},n.abort=function(){var e=this;this._uploads.forEach(function(t){return e._abort(t)})},n.send=function(){var e=this;if(!this._inFlight){this._inFlight=!0,this._uploads=[];for(var t in this._files)this._files[t].forEach(function(n){e._uploads.push(e._createFileUpload(t,n))});this._waiting=this._uploads.slice(0),this._pending=[],this._uploads.length?this._processQueue():(this._fileLessUpload=this._createFileUpload(null,null),this._processUpload(this._fileLessUpload))}},n._processQueue=function(){if(e.prototype._processQueue.call(this),!this._pending.length&&!this._waiting.length){var t=this._uploads,n=this._shouldAlwaysReturnResponse?this._fileLessUpload!=null?{response:this._fileLessUpload.getResponse(),uploads:t}:{response:t[0].getResponse(),uploads:t}:t;this.inform("complete",n)}},t.isSupported=function(){return r("AsyncUploadBase").isSupported()},t})(r("AsyncUploadBase"));l.default=e}),98);
__d("shield",[],(function(t,n,r,o,a,i){function e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(typeof e!="function")throw new TypeError("shield expects a function as the first argument");return function(){return e.apply(t,r)}}i.default=e}),66);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","DOMQuery","DataStore","Event","FBLogger","Form","Parent","isElementNode","mixin","setTimeout","shield"],(function(t,n,r,o,a,i,l){function e(e){var t={},n=o("DOMQuery").scry(e,'input[type="file"]');return n.forEach(function(e){t[e.name]=e.files}),t}function s(e){var t=o("DOMQuery").scry(e,'input[type="file"]');t.forEach(function(e){e.files=null})}var u=(function(t){function n(e,n,a){var i;if(i=t.call(this)||this,i._allowCrossOrigin=!1,i._allowCrossPageTransition=!1,i._uploadInParallel=!1,i._handleSubmit=function(e){if(!(e.isDefaultPrevented()||e.getTarget()!==i._form)){if(i.inform("submit")===!1){e.prevent();return}i.submit(e)}},i._click=function(e){for(var t=e.getTarget();r("isElementNode")(t);){if(t.type==="submit"){i._clickTarget=t,r("setTimeout")(i._unclick,0);break}t=t.parentNode}},i._unclick=function(){i._clickTarget=null},i.initial=function(e){return i.inform("initial",{upload:e})},e.getAttribute("rel")==="async")throw r("FBLogger")("FileForm","primer-only").mustfixThrow("FileForm cannot be used with Primer forms.");if((e.getAttribute("method")||"").toUpperCase()!=="POST")throw r("FBLogger")("FileForm","post-only").mustfixThrow("FileForm must be used with POST forms.");return i._form=e,i._previousEncoding=i._form.enctype,i._form.enctype=i._form.encoding="multipart/form-data",i._files=null,i._customHeader={},n&&i.enableBehaviors(n),i._options=a||{},i.setAllowCrossOrigin(i._options.allowCrossOrigin),i.setAllowCrossPageTransition(i._options.allowCrossPageTransition),i.setUploadInParallel(i._options.uploadInParallel),i.setConcurrentLimit(i._options.concurrentLimit),i.setPreprocessHandler(i._options.preprocessHandler),i.setNetworkErrorRetryLimit(i._options.networkErrorRetryLimit),i._listeners=[r("Event").listen(document.documentElement,"submit",i._handleSubmit),r("Event").listen(i._form,"click",i._click)],o("DataStore").set(i._form,"FileForm",i),i}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.getRoot=function(){return this._form},a.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},a.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},a.setUploadInParallel=function(t){return this._uploadInParallel=!!t,this},a.setConcurrentLimit=function(t){return this._concurrentLimit=t,this},a.setCustomHttpHeader=function(t,n){return this._customHeader[t]=n,this},a.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},a.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},a.setFiles=function(t){return this._files=t,this},a.submit=function(n){var t=this,a;if(this._uploadInParallel&&r("AsyncUploadRequest").isSupported()){a=new(r("AsyncUploadRequest"))().setPreprocessHandler(this._preprocessHandler).setData(o("Form").serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);for(var i in this._customHeader)a.setCustomHttpHeader(i,this._customHeader[i]);this._concurrentLimit&&a.setLimit(this._concurrentLimit),this._files?a.setFiles(this._files):a.setFiles(e(this._form));var l=[a.subscribe("progress",function(e,n){t.progress(n,n.getProgressEvent())}),a.subscribe("initial",function(e,n){t.initial(n)}),a.subscribe("success",function(e,n){t.success(n,n.getResponse())}),a.subscribe("start",function(e,n){t.inform("start",{upload:n})}),a.subscribe("failure",function(e,n){return t.failure(n,n.getResponse()),!1}),a.subscribe("complete",function(){for(;l.length;)l.pop().unsubscribe()})]}else{var s,u=this._files;if(u){s=o("Form").createFormData(o("Form").serialize(this._form,this._clickTarget));var c=r("AsyncUploadRequest").parseFiles(u),d=function(t){var e=c[t];e.length===1?s.append(t,e[0]):(t+="[]",e.forEach(function(e){s.append(t,e)}))};for(var m in c)d(m)}else s=o("Form").createFormData(this._form,this._clickTarget);a=new(r("AsyncRequest"))().setRawData(s).setHandler(function(e){return t.success(null,e)}).setErrorHandler(function(e){return t.failure(null,e)}).setUploadProgressHandler(function(e){return t.progress(null,e)}).setInitialHandler(r("shield")(this.initial,this,null)),this.inform("start",{upload:null})}a.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send(),this._request=a,n&&n.prevent()},a.success=function(t,n){var e={response:n,upload:t};this.inform("success",e)!==!1&&r("Event").fire(this._form,"success",e),this._cleanup()},a.failure=function(t,n){var e={response:n,upload:t};this.inform("failure",e)!==!1&&r("Event").fire(this._form,"error",e)!==!1&&r("AsyncResponse").defaultErrorHandler(n),this._cleanup()},a.progress=function(t,n){this.inform("progress",{event:n,upload:t})},a.abort=function(){this._request&&(this._request.abort(),this._cleanup())},a.clear=function(){s(this._form)},a.destroy=function(){for(this._cleanup();this._listeners&&this._listeners.length;)this._listeners.pop().remove();this._listeners=null,this._form.enctype=this._form.encoding=this._previousEncoding,o("DataStore").remove(this._form,"FileForm")},a._cleanup=function(){this._request=null},a._getStatusElement=function(){return o("Parent").byClass(this._form,"stat_elem")||this._form},n.getInstance=function(t){return o("DataStore").get(t,"FileForm")},n})(r("mixin")(r("ArbiterMixin"),r("BehaviorsMixin")));Object.assign(u,{EVENTS:["start","submit","initial","progress","success","failure"]}),l.default=u}),98);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(t){var n;return n=e.call(this)||this,n._onFileFormEvent=function(e,t){return(e==="success"||e==="failure")&&n._destroyFileForm(),n.inform(e,t)},n._inputElem=t,n._data={},n}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.setInput=function(t){return this._inputElem=t,this},r.setURI=function(t){return this._uri=t,this},r.setData=function(t){return this._data=t,this},r.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},r.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},r.setFiles=function(t){return this._files=t,this},r.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},r.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},r.setUploadInParallel=function(t){return this._uploadInParallel=!!t,this},r.setConcurrentLimit=function(t){return this._concurrentLimit=t,this},r.abort=function(){this._fileForm&&(this._fileForm.abort(),this._destroyFileForm())},r.send=function(){this._createForm();var e=this._inputElem&&!this._inputElem.parentElement;if(!e&&this._inputElem){var t=this._inputElem.cloneNode(!1);n("DOM").replace(this._inputElem,t)}this._inputElem&&n("DOM").appendContent(this._formElem,this._inputElem),n("DOM").appendContent(document.body,this._formElem),this._fileForm.submit(),!e&&this._inputElem&&n("DOM").replace(t,this._inputElem),this._removeFormEl()},r._createForm=function(){var e,t,r;this._destroyFileForm(),this._formElem=n("DOM").create("form",{action:this._uri,method:"post"}),this._fileForm=new(n("FileForm"))(this._formElem,null,{allowCrossOrigin:!!this._allowCrossOrigin,allowCrossPageTransition:!!this._allowCrossPageTransition,uploadInParallel:!!this._uploadInParallel,concurrentLimit:(e=this._concurrentLimit)!=null?e:0,preprocessHandler:(t=this._preprocessHandler)!=null?t:null,networkErrorRetryLimit:(r=this._retryLimit)!=null?r:0}),this._files&&this._fileForm.setFiles(this._files),this._fileForm.subscribe(n("FileForm").EVENTS,this._onFileFormEvent),n("Form").createHiddenInputs(babelHelpers.extends({fb_dtsg:n("DTSG").getToken()},this._data),this._formElem)},r._removeFormEl=function(){n("DOM").remove(this._formElem),this._formElem=null},r._destroyFileForm=function(){this._fileForm&&(this._fileForm.destroy(),this._fileForm=null)},t})(n("mixin")(n("ArbiterMixin")));a.exports=e}),null);
__d("ImageExif",["exif-js"],(function(t,n,r,o,a,i){n("exif-js").enableXmp();var e={readFromFile:function(n,r){var t=new FileReader;t.addEventListener("load",function(t){var n=t.target.result,o=e.readFromArrayBuffer(n);r(o)},!1),t.readAsArrayBuffer(n)},readFromArrayBuffer:function(t){return n("exif-js").readFromBinaryFile(t)}};a.exports=e}),null);
__d("StringEncoding",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=new Uint8Array(e),r=0,o=[];r<n.length;){var a=n[r],i=void 0;if(a>>7===0)i=1;else if(a>>5===6)a&=31,i=2;else if(a>>4===14)a&=15,i=3;else if(a>>3===30)a&=7,i=4;else if(a>>2===62)a&=3,i=5;else if(a>>1===126)a&=1,i=6;else throw new Error("Cannot decode as UTF-8 - unrecognised codepoint header");if(r+i>n.length)throw new Error("Cannot decode as UTF-8 - incomplete codepoint");for(var l=1;l<i;l++){var s=n[r+l];if(s>>6!==2)throw new Error("Cannot decode as UTF-8 - unrecognised codepoint subsequent byte");s&=63,a<<=6,a|=s}if(a>1114111)throw new Error("Cannot decode as UTF-8 - JavaScript doesn't support codepoints over 0x10FFFF");if(!a)switch(t){case"error":throw new Error("Cannot decode as UTF-8 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(a),r+=i}return String.fromCodePoint.apply(String,o)}function l(e){return(e&255)<<8|e>>8}function s(e,t){if(e.byteLength%2!==0)throw new Error("Cannot decode as UTF-16 - data length mod 2 != 0");var n=new Uint16Array(e),r=0,o=[],a=!1;for(n[0]===65279?++r:n[0]==65534&&(++r,a=!0);r<n.length;){var i=n[r];a&&(i=l(i));var s=i;if(i>55295&&i<57344){if((i&64512)!==55296)throw new Error("Cannot decode as UTF-16 - incorrect signature for high surrogate");if(r+1>=n.length)throw new Error("Cannot decode as UTF-16 - incomplete codepoint");++r;var u=n[r];if(a&&(u=l(u)),(u&64512)!==56320)throw new Error("Cannot decode as UTF-16 - incorrect signature for low surrogate");s=((i&1023)<<10|u&1023)+65536}if(!s)switch(t){case"error":throw new Error("Cannot decode as UTF-16 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(s),++r}return String.fromCodePoint.apply(String,o)}function u(e){return(e&255)<<24|(e&65280)<<8|(e&255<<16)>>8|e>>>24}function c(e,t){if(e.byteLength%4!==0)throw new Error("Cannot decode as UTF-32 - data length mod 4 != 0");var n=new Uint32Array(e),r=0,o=[],a=!1;for(n[0]===65279?++r:n[0]==4294836224&&(++r,a=!0);r<n.length;){var i=n[r];if(a&&(i=u(i)),i&2147483648)throw new Error("Cannot decode as UTF-32 - invalid codepoint");if(i>1114111)throw new Error("Cannot decode as UTF-32 - JavaScript doesn't support codepoints over 0x10FFFF");if(!i)switch(t){case"error":throw new Error("Cannot decode as UTF-32 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(i),++r}return String.fromCodePoint.apply(String,o)}var d={"utf-8":e,"utf-16":s,"utf-32":c},m=(function(){function e(e,t){e!=null?this.$1=e:this.$1=["utf-8","utf-16","utf-32"],t==null?this.$2="error":this.$2=t;for(var n of this.$1)this.$3(n)}var t=e.prototype;return t.getPrecedence=function(){return this.$1},t.decode=function(t){var e=[];for(var n of this.$1){var r=this.$3(n);try{return r(t,this.$2)}catch(t){e.push(t)}}throw new Error(e.join(", "))},t.$3=function(t){var e=d[t];if(e==null)throw new Error("Unknown encoding "+t);return e},e})();i.Decoder=m}),66);
__d("ImageMetadata",["ImageExif","StringEncoding","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$4="",this.$6=e,this.$7=new Uint8Array(e),this.$8()}var n=e.prototype;return n.$8=function(){for(var e=0;e<this.$7.length;){if(e=this.$9(e),e===-1)return;var t=this.$7[e+1],n=s[t];if(!n)return;var r=n.length;if(r===void 0&&(r=this.$7[e+2]*256+this.$7[e+3]),this.$10(e,r,n),n.name==="SOS")return;e+=2+r}},n.$10=function(t,n,r){switch(r.name){case"APP1":this.$11(t+4,u)?(this.$1||(this.$1=t,this.$2=n),this.$12(t+4+u.length,n-2-u.length)):this.$11(t+4,c)?(this.$1=t,this.$2=n,this.$13(t+4+c.length,n-2-c.length)):this.$11(t+4,d)&&this.$14(t+4+d.length,n-2-d.length);break;case"SOF0":case"SOF1":case"SOF2":case"SOF3":case"SOF5":case"SOF6":case"SOF7":case"JPG":case"SOF9":case"SOF10":case"SOF11":case"SOF13":case"SOF14":case"SOF15":this.$15(t+4,n-2);break}},n.$15=function(t,n){var e=this.$7[t+3]*256+this.$7[t+4],r=this.$7[t+1]*256+this.$7[t+2];e>0&&r>0&&(this.$5={x:e,y:r})},n.$12=function(t,n){var e=console.log;try{console.log=r("emptyFunction");var a=o("ImageExif").readFromArrayBuffer(this.$6)||{}}finally{console.log=e}var i={};for(var l in a){var s=a[l];typeof s=="string"&&(s=s.trim()),i[l.trim()]=s}this.$3=i},n.$13=function(t,n){var e=new(o("StringEncoding")).Decoder(null,"truncate");try{var r=e.decode(this.$6.slice(t,t+n));this.$4=r}catch(e){return}},n.$14=function(t){},n.$11=function(t,n){var e=this;return n.split("").every(function(n){return e.$7[t++]===n.charCodeAt(0)})},n.$9=function(t){for(var e=t;e+1<this.$7.length;++e)if(this.$7[e]===255&&this.$7[e+1]!==0&&this.$7[e+1]!==255)return e;return-1},n.hasAPP1=function(){return!!this.$1},n.hasExif=function(){return!!this.$3},n.hasXMP=function(){return!!this.$4},n.hasSize=function(){return!!this.$5},n.getAPP1Location=function(){return this.hasAPP1()?this.$1:null},n.getAPP1Length=function(){return this.hasAPP1()?this.$2:null},n.getExif=function(){if(!this.$3)throw new Error("Image has no Exif data");return this.$3},n.getXMPString=function(){return this.$4},n.getSize=function(){if(!this.$5)throw new Error("Could not find size data?!");return this.$5},n.getBufferLength=function(){if(!this.$6)throw new Error("Do not find buffer data!");return this.$6.byteLength},e.genMetadataFromBlob=async function(n){return new e(await e.$16(n))},e.$16=function(n){return new Promise(function(e,r){var o=new t.FileReader;o.onabort=r,o.onerror=r,o.onload=e,o.readAsArrayBuffer(n)})},e})(),s=[];s[216]={name:"SOI",length:0},s[192]={name:"SOF0"},s[193]={name:"SOF1"},s[194]={name:"SOF2"},s[195]={name:"SOF3"},s[197]={name:"SOF5"},s[198]={name:"SOF6"},s[199]={name:"SOF7"},s[200]={name:"JPG"},s[201]={name:"SOF9"},s[202]={name:"SOF10"},s[203]={name:"SOF11"},s[205]={name:"SOF13"},s[206]={name:"SOF14"},s[207]={name:"SOF15"},s[196]={name:"DHT"},s[219]={name:"DQT"},s[221]={name:"DRI",length:2},s[218]={name:"SOS"},s[208]={name:"RST0",length:0},s[209]={name:"RST1",length:0},s[210]={name:"RST2",length:0},s[211]={name:"RST3",length:0},s[212]={name:"RST4",length:0},s[213]={name:"RST5",length:0},s[214]={name:"RST6",length:0},s[215]={name:"RST7",length:0},s[224]={name:"APP0"},s[225]={name:"APP1"},s[226]={name:"APP2"},s[227]={name:"APP3"},s[228]={name:"APP4"},s[229]={name:"APP5"},s[230]={name:"APP6"},s[231]={name:"APP7"},s[232]={name:"APP8"},s[233]={name:"APP9"},s[234]={name:"APP10"},s[235]={name:"APP11"},s[236]={name:"APP12"},s[237]={name:"APP13"},s[238]={name:"APP14"},s[239]={name:"APP15"},s[254]={name:"COM"},s[217]={name:"EOI",length:0};var u="Exif\0\0",c="http://ns.adobe.com/xap/1.0/\0",d="http://ns.adobe.com/xmp/extension/\0";l.default=e}),98);
__d("PhotosUploadID",[],(function(t,n,r,o,a,i){var e=1024;function l(){return(e++).toString()}i.getNewID=l}),66);
__d("ReactComposerMediaFilterUtils",["ComposerXNativeAudioUploadsConfig","VideoUploadConfig"],(function(t,n,r,o,a,i,l){function e(e){var t=c(e).length,n=d(e).length;return t>n}function s(e){return c(e).length>0}function u(e){return m(e).length>0}function c(e){return p(e,r("VideoUploadConfig").videoExtensions)}function d(e){var t={gif:!0};return p(e,t)}function m(e){var t={};return Object.keys(r("ComposerXNativeAudioUploadsConfig").audioExtensions).forEach(function(e){t[e]=r("ComposerXNativeAudioUploadsConfig").audioExtensions[e]!==0}),p(e,t)}function p(e,t){return e.filter(function(e){var n,r,o=e.indexOf(".")!==-1&&(n=(r=e.split(".").pop())==null?void 0:r.toLowerCase())!=null?n:"";return t[o]})}l.hasEditableVideos=e,l.hasVideos=s,l.hasAudioFiles=u,l.filterVideos=c,l.filterNonEditableVideos=d,l.filterAudioFiles=m,l.filterFileOfSupportedType=p}),98);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/spherical_media/photo/metadata/",{})}),null);
__d("SphericalImageUtils",["ImageMetadata","Promise","XAsyncRequest","XSphericalPhotoSphereMetadataAsyncController","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=2048,u=(function(){function o(){}return o.genArrayBufferFromBlob=function(o){return new(e||(e=n("Promise")))(function(e,n){if(t.FileReader){var r=new t.FileReader;r.onabort=n,r.onerror=n,r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(o)}else n(new Error("global.FileReader doesn't exit"))})},o.shouldCheckInServer=function(t){if(!t.hasExif()&&!t.hasXMP()||!t.hasSize())return!1;var e=t.getXMPString();if(this.getMayContainSphericalMetadata(e))return!0;var n=t.getSize(),r=n.x,o=n.y;if(Math.max(r,o)<s||r/o<2&&o/r<2)return!1;var a=t.hasExif()?t.getExif():{};return!(e===""&&(!a.Make||!a.Model))},o.genPhotosphereMetadata=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){r("promiseDone")(t.genArrayBufferFromBlob(o),function(o){try{var a=new(r("ImageMetadata"))(o);t.shouldCheckInServer(a)?r("promiseDone")(t.genPhotosphereMetadataFromServer(a.hasSize()?a.getSize():{x:0,y:0},a.getXMPString(),a.hasExif()?a.getExif():{}),function(t){var n=t.payload;e({photoSphereMetadata:n,imageMetadata:a})},n):e({})}catch(e){e.__manual=!0,n(e)}},n)})},o.genPhotosphereMetadataFromServer=function(o,a,i){var t=this;return new(e||(e=n("Promise")))(function(e,n){new(r("XAsyncRequest"))(r("XSphericalPhotoSphereMetadataAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({exif_string:t.getExifString(i),height:o.y,width:o.x,xmp:a}).setHandler(e).setErrorHandler(n).send()})},o.getExifString=function(t){return JSON.stringify(t,function(e,t){return e==="FocalLength"&&t.numerator&&t.denominator?t.numerator+"/"+t.denominator:t})},o.getMayContainSphericalMetadata=function(t){return t!==""&&t.indexOf("GPano:")>-1},o})();l.default=u}),98);
__d("SphericalImage",["SphericalImageUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="ProjectionType",s=(function(){function t(e){this.props=e}t.createFromBlob=async function(t){var e=await r("SphericalImageUtils").genPhotosphereMetadata(t);return new this(e)};var n=t.prototype;return n.isSpherical=function(){return!!this.props.photoSphereMetadata},n.getImageMetadata=function(){return this.props.imageMetadata},n.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata},n.getSize=function(){return this.props.imageMetadata?this.props.imageMetadata.getSize():null},n.getBufferLength=function(){return this.props.imageMetadata?this.props.imageMetadata.getBufferLength():null},n.getProjectionType=function(){var t="";return this.props.photoSphereMetadata&&this.props.photoSphereMetadata[e]&&(t=this.props.photoSphereMetadata[e]),t},t})();l.default=s}),98);
__d("SphericalPhotoUploadHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return!(t&&Math.max(t.x,t.y)<=n||e==="cubestrip")}function l(e,t,n){return!(t==null||t<=n||e==="cubestrip")}i.shouldResize360=e,i.shouldRecompress360=l}),66);
__d("WebWorker",["invariant","BlobFactory","Bootloader","EventListener","FBLogger","SubscriptionsHandler","TrustedTypesWebWorkerScriptURLPolicy","URI","WebWorkerConfig","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","XHRRequest","cr:951783","emptyFunction","err","filterObject","getCrossOriginTransport","getWorkerInitScriptSPINParams","gkx","isSameOrigin","justknobx","memoize","nullthrows","performanceNow"],(function(t,n,r,o,a,i,l){var e,s,u=t.URL||t.webkitURL,c={remove:n("emptyFunction")},d=(function(){"use strict";function r(e){var t=this;this.$2=!1,this.$3=null,this.$4=e,this.__worker=null,this.$5=n("emptyFunction"),this.$6=n("emptyFunction"),this.$7=[],this.$8=[],this.$9=!1,this.$10=new(n("SubscriptionsHandler")),this.$1=n("cr:951783")!==null?n("cr:951783")(function(){t.$9||t.terminate()}):c,n("gkx")("20935")&&setTimeout(function(){!t.$9&&!t.isCurrentState("terminated")&&n("FBLogger")("comet_infra").mustfix("WebWorker (resource: %s) allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.",e.name)},1e3),this.$11("constructed")}var o=r.prototype;return o.setMessageHandler=function(t){return this.$5=t||n("emptyFunction"),this},o.setErrorHandler=function(t){return this.$6=t||n("emptyFunction"),this},o.postMessage=function(t,n){if(!this.isCurrentState("constructed")||l(0,5977),!this.isCurrentState("terminated")||l(0,5978),this.isCurrentState("preparing"))return this.$7.push(this.postMessage.bind(this,t,n)),this;var e={type:"message",message:t};return n?this.getInterfaceableWorker().postMessage(e,n):this.getInterfaceableWorker().postMessage(e),this},o.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())},o.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate(),this.$12()},o.execute=function(){var e=this;!this.isCurrentState("terminated")||l(0,5979);var t=["preparing","executing"];return t.some(function(t){return e.isCurrentState(t)})?this:(this.$11("preparing"),r.prepareResource(this.$4,this.$14.bind(this)),this)},o.setAllowCrossPageTransition=function(t){return n("gkx")("20935")&&!t&&n("FBLogger")("comet_infra").mustfix("allowAcrossPageTransitions must be true because we dont kill these in Comet."),this.$9=t,this},o.isCurrentState=function(t){return r.states.includes(t)||l(0,5980,t),t===this.$3},o.$14=function(){if(!this.isCurrentState("executing")||l(0,5981),!this.isCurrentState("terminated")){if(this.$4.useInitScript&&n("gkx")("21112")||this.$4.sameOriginURL||this.$4.source||l(0,19837,this.$4.name),this.$4.useInitScript&&n("gkx")("21112")){var e,t=n("nullthrows")((e=n("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(n("getWorkerInitScriptSPINParams")()))==null?void 0:e.toString()),o=new window.URL(this.$4.url,window.location.href).href;if(o==null)throw n("err")("Can't start up worker without a resource url.");this.__worker=this.constructWorker(t,this.$4.name),this.__worker.postMessage({bundleUrl:o,doNotStartBundle:!0,isDev:!1,resource:this.$4,type:"sr-init"})}else this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(r.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));if(this.$15("ping",Date.now()),this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(e){throw this.terminate(),this.$16("define_error",{message:e.message}),e}this.$17(),this.$11("executing"),this.$7.forEach(function(e){return e()}),this.$7=[],this.$8.forEach(function(e){return e()}),this.$8=[]}},o.$13=function(){this.$10.release()},o.$15=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.getInterfaceableWorker().postMessage({type:t,args:n})},o.$16=function(t,o){var e=!(this.$4.useInitScript&&n("gkx")("21112"));r.$16(t,this.$4.name,babelHelpers.extends({},o,{cross_page_transition:!!this.$9,state:this.$3}),e)},r.$18=function(t){return Object.keys(n("filterObject")({object_url:t&&r.$19(),data_url:t&&r.$20(),worker:r.isSupported()},function(e){return!!e}))},o.$17=function(){this.$10.addSubscriptions(n("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),n("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))},o.$22=function(t){var e=this.$6(t);!e&&!t.defaultPrevented&&this.$16("exception",{message:t.message})},o.$21=function(n){var e=n.data;switch(e.type){case"message":this.$5(e.message);break;case"pong":this.$2=!0,this.$16("executed",{dt:Math.floor(e.args[1]-e.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate(),this.$16("haste_error",{message:e.message});break;case"console":var r=e.args.shift();["log","error","info","debug","warn"].includes(r)||l(0,5983,r),t.console[r].apply(t.console,e.args);break}},o.$11=function(t){r.states.includes(t)||l(0,5984,t),this.$16("transition",{next_state:t}),this.$3=t},r.prepareResource=function(a,i){if(i===void 0&&(i=n("emptyFunction")),a.sameOriginURL||a.url||a.source||l(0,5985),r.isSupported()||l(0,5986),a.sameOriginURL)i();else if(a.url&&n("isSameOrigin")(new(e||(e=n("URI")))(a.url),new(e||(e=n("URI")))(t.location.href)))a.sameOriginURL=a.url,i();else if(a.source)n("justknobx")._("819")&&n("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",a.name,a.url),r.$23()&&(a.sameOriginURL=r.$24(a.source)),i();else if(n("gkx")("21112")&&a.useInitScript===!0)i();else if(n("justknobx")._("819")&&n("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",a.name,a.url),a.loading)a.loading.push(i);else{var o=(s||(s=n("performanceNow")))();a.loading=[i],r.$25(a.url,function(e){e?(a.source=e,r.$23()&&(a.sameOriginURL=r.$24(e)),r.$16("prepared",a.name,{dt:Math.floor((s||(s=n("performanceNow")))()-o),bytes:e.length},!1)):r.$16("failed",a.name,{dt:Math.floor((s||(s=n("performanceNow")))()-o),bytes:0},!1),a.loading.forEach(function(e){return e()}),a.loading=!1})}return a},r.releaseResource=function(t){return t.sameOriginURL.indexOf("blob:")===0&&(u.revokeObjectURL&&u.revokeObjectURL(t.sameOriginURL),t.sameOriginURL=null),t},r.isSupported=function(){return f},r.isMessageChannelSupported=function(){return r.areTransferablesSupported()&&!!t.MessageChannel},r.areTransferablesSupported=function(){return r.isSupported()&&g()},r.$25=function(t,r){new(n("XHRRequest"))(t).setTransportBuilder(n("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(e){r(e)}).setErrorHandler(r.bind(null,null)).send()},r.$24=function(t){if(r.$23()||l(0,5987),r.$19()){var e=n("BlobFactory").getBlob([t],{type:"application/javascript"});return u.createObjectURL(e)}if(r.$20())return"data:application/javascript,"+encodeURIComponent(t)},r.$19=function(){return n("BlobFactory").isSupported()&&p()},r.$20=function(){return _()},r.$23=function(){return r.$19()||r.$20()},r.$16=function(t,o,a,i){n("WebWorkerConfig").logging.enabled&&n("Bootloader").loadModules(["BanzaiLogger"],function(e){e.log(n("WebWorkerConfig").logging.config,babelHelpers.extends({},a,{features_array:r.$18(i),event:t,resource:o}))},"WebWorker")},o.constructWorker=function(t,n){return m(t,n)},o.$26=function(t,n){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,t,n));return}this.getInterfaceableWorker().postMessage({type:"port",message:t},n)},o.createMessageChannel=function(t,n){var e=new MessageChannel;return this.$26(t,[e.port2].concat(n||[])),e.port1.start(),e.port1},o.getInterfaceableWorker=function(){return this.__worker},r})();d.states=["constructed","preparing","executing","terminated"],d.evalWorkerURL=n("WebWorkerConfig").evalWorkerURL;function m(e,r){return new t.Worker(n("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),r!=null?{name:r}:{})}var p=n("memoize")(function(){var e,t;if(!u||!u.createObjectURL)return!1;try{e=u.createObjectURL(n("BlobFactory").getBlob([""],{type:"application/javascript"}));var r=m(e);r.terminate(),t=!0}catch(e){t=!1}finally{u.revokeObjectURL&&u.revokeObjectURL(e)}return t}),_=n("memoize")(function(){var e;try{var t=m("data:application/javascript,");t.terminate(),e=!0}catch(t){e=!1}return e}),f=!!t.Worker,g=n("memoize")(function(){var e;try{var t=m(d.evalWorkerURL),n=new ArrayBuffer(0);t.postMessage({buffer:n},[n]),t.terminate(),e=!0}catch(t){e=!1}return e});a.exports=d}),null);
__d("curry",["bind"],(function(t,n,r,o,a,i,l){var e=r("bind")(null,r("bind"),null),s=e;l.default=s}),98);
__d("loadImageFromBlob",["Promise"],(function(t,n,r,o,a,i){var e;function l(t){return new(e||(e=n("Promise")))(function(e,n){var r=new Image;r.onload=function(){URL.revokeObjectURL(r.src),e(r)},r.onerror=function(e){URL.revokeObjectURL(r.src),n(e)},r.src=URL.createObjectURL(t)})}i.default=l}),66);
__d("XComposerPhotoUploader",["AsyncUploadRequest","FileInputUploader","PhotosMimeType","PhotosUploadID","ReactComposerMediaFilterUtils","SphericalImage","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","curry","emptyFunction","getErrorSafe","loadImageFromBlob","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=t.URL||t.webkitURL||{},u=(function(){function t(e){this.$6=!1,this.$21={},this.$2=e.uploadData||{},this.$1=e.uploadEndpoint,this.$3=e.retryLimit,this.$4=e.concurrentLimit,this.$5=e.resizer,this.$7=e.onUploadEnqueued||r("emptyFunction"),this.$8=e.onUploadsEnqueued||r("emptyFunction"),this.$9=e.onResizeStart||r("emptyFunction"),this.$12=e.onResizeProgress||r("emptyFunction"),this.$10=e.onResizeSuccess||r("emptyFunction"),this.$11=e.onResizeFailure||r("emptyFunction"),this.$13=e.onSphericalCheckFailure||r("emptyFunction"),this.$14=e.onSphericalCheckSuccess||r("emptyFunction"),this.$15=e.onUploadIsSpherical||r("emptyFunction"),this.$16=e.onUploadSent||r("emptyFunction"),this.$17=e.onUploadStart||r("emptyFunction"),this.$18=e.onUploadProgress||r("emptyFunction"),this.$19=e.onUploadSuccess||r("emptyFunction"),this.$20=e.onUploadFailure||r("emptyFunction"),this.$6=e.preventDefaultErrorHandler}var n=t.prototype;return n.setUploadEndpoint=function(t){this.$1=t},n.setOption=function(t,n){return this.$21[t]=n,this},n.getUploadData=function(){return this.$2},n.setUploadData=function(t){this.$2=t},n.upload=function(t,n){var e=this;n=n||0;var a=babelHelpers.extends({},this.$2),i=null;if(this.$22(t)){if(i=Array.from(t.files),i=i.filter(function(e){return!o("ReactComposerMediaFilterUtils").hasVideos([e.name])}),i.length===0)return;i.forEach(function(t){t.uploadID||(t.uploadID=o("PhotosUploadID").getNewID()),e.$7({uploadID:t.uploadID,fileName:t.name,isSpherical:!1,fileURL:s.createObjectURL?s.createObjectURL(t):null})})}else{var l=o("PhotosUploadID").getNewID();t.uploadID=l,a.upload_id=l,this.$7({uploadID:l,fileName:t.value.split("/").pop().split("\\").pop(),fileURL:s.createObjectURL?s.createObjectURL(t):null})}this.$8();var u=new(r("FileInputUploader"))(t).setURI(this.$1).setData(a).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);i&&i.length>0&&(u.setFiles({farr:i}),this.$5?u.setPreprocessHandler(this.$23.bind(this)):u.setPreprocessHandler(this.$24.bind(this)),this.$4&&u.setConcurrentLimit(this.$4)),u.subscribe("progress",function(n,r){return e.$18(e.$25(r,t),r)}),u.subscribe("failure",function(n,r){return e.$20(e.$25(r,t),r,i)}),u.subscribe("start",function(n,r){return e.$17(e.$25(r,t),r)}),u.subscribe("success",function(n,r){return e.$19(e.$25(r,t),r)});try{u.send(),this.$16(t)}catch(e){throw e}},n.uploadFiles=function(t){var e=this,n=Array.from(t),r=[];n.forEach(function(t){var n=o("PhotosUploadID").getNewID();t.uploadID||(t.uploadID=n),e.$7({fileName:t.name,fileURL:s.createObjectURL?s.createObjectURL(t):null,isSpherical:!1,uploadID:n}),r.push(n)});var a=this.getAsyncFileUploadRequest(n,r,this.$6===!0?{preventDefaultErrorHandler:this.$6}:void 0);a.send()},n.getAsyncFileUploadRequest=function(t,n,r){var e=this,o=this.$26(t,r);return o.subscribe("start",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$17(i,{upload:o})}),o.subscribe("progress",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$18(i,{upload:o,event:o.getProgressEvent()})}),o.subscribe("success",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$19(i,{upload:o,response:o.getResponse()})}),o.subscribe("failure",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);return e.$20(i,{upload:o,response:o.getResponse()},t)}),o},n.getAsyncUploadRequest=function(t,n){var e=this,r=this.$26(t,n);return r.subscribe("start",function(t,n){return e.$17(n.getFile().uploadID,{upload:n})}),r.subscribe("progress",function(t,n){return e.$18(n.getFile().uploadID,{upload:n,event:n.getProgressEvent()})}),r.subscribe("success",function(t,n){return e.$19(n.getFile().uploadID,{upload:n,response:n.getResponse()})}),r.subscribe("failure",function(n,r){return e.$20(r.getFile().uploadID,{upload:r,response:r.getResponse()},t)}),r},n.$26=function(t,n){var e=new(r("AsyncUploadRequest"))().setData(babelHelpers.extends({},n&&n.data,this.$2)).setFiles({farr:t}).setAllowCrossOrigin(!0).setURI(this.$1);n!=null&&n.preventDefaultErrorHandler&&e.setPreventDefaultErrorHandler(!0),this.$4&&e.setLimit(this.$4),this.$5?e.setPreprocessHandler(this.$23.bind(this)):e.setPreprocessHandler(this.$24.bind(this));for(var o in this.$21)e.setOption(o,this.$21[o]);return e},n.$27=function(t,n,r){var e=r.getFile(),o=t.indexOf(e);return n[o]},n.$25=function(t,n){return t.upload?t.upload.getFile().uploadID:n.uploadID},n.$24=function(t,n){var e=this;r("promiseDone")((async function(){return await e.$28(t,n)})())},n.$28=async function(t,n){var e=t.getFile(),r=await this.$29(e),o=t.getFile().uploadID;r&&r.isSpherical()?this.$15(r.isSpherical(),r,o):this.$15(!1,null,""),n(t)},n.$23=function(t,n){var e=this;r("promiseDone")((async function(){return await e.$30(t,n)})())},n.$29=async function(n){var t=(e||(e=r("performanceNow")))();try{var o=await r("SphericalImage").createFromBlob(n);return this.$14(n,(e||(e=r("performanceNow")))()-t,o),o}catch(o){return this.$13(n,(e||(e=r("performanceNow")))()-t),null}},n.$31=function(t){return this.$32(this.$5.resizeBlob.bind(this.$5),t)},n.$33=function(t,n){return n===void 0&&(n=r("SphericalPhotoTypedConfig").upload_size_limit),this.$32(this.$5.resize360Blob.bind(this.$5),t,n)},n.$34=function(t){return r("loadImageFromBlob")(t).then(function(e){return{width:e.width,height:e.height}})},n.$32=function(t,n,o){var e=this,a=r("curry")(this.$12,n.uploadID),i=r("curry")(this.$9,n),l=function(){return e.$34(n).then(i)};return new Promise(function(e,r){l(),t(n,function(t,n,o,a,i,l,s){t?r(t):e(o?{originalWidth:a,originalHeight:i}:{blob:n,originalWidth:a,originalHeight:i,outputWidth:l,outputHeight:s})},a,o)})},n.$30=async function(n,a){var t=n.getFile(),i=this.$5.isEligible(t==null?void 0:t.size,t==null?void 0:t.type);if(!t||!o("PhotosMimeType").isJpeg(t.type)||!i){this.$15(!1,null,""),t&&r("promiseDone")(this.$34(t).then(function(e){n.getAdditionalData().set("js_resized",!1).set("original_file_size",t.size).set("original_width",e==null?void 0:e.width).set("original_height",e==null?void 0:e.height).set("upload_width",e==null?void 0:e.width).set("upload_height",e==null?void 0:e.height)},r("emptyFunction"))),a(n);return}var l=(e||(e=r("performanceNow")))(),s,u;try{var c=null;if(c=await this.$29(t),c&&c.isSpherical()){this.$15(!0,c,t.uploadID);var d=c.getSize(),m=r("SphericalPhotoTypedConfig").upload_size_limit,p=c.getProjectionType(),_=!1;_=o("SphericalPhotoUploadHelper").shouldRecompress360(p,c.getBufferLength(),r("SphericalPhotoTypedConfig").upload_bytes_limit);var f=o("SphericalPhotoUploadHelper").shouldResize360(p,d,m);d&&(f||_)&&(f?s=await this.$33(t):s=await this.$33(t,Math.max(d.x,d.y)-1))}else this.$15(!1,null,""),s=await this.$31(t);s&&(s.blob!=null&&(u=s.blob,u.uploadID=t.uploadID,u.name=t.name,n.setFile(u)),n.getAdditionalData().set("js_resized",!0).set("original_file_size",t.size).set("original_width",s.originalWidth).set("original_height",s.originalHeight).set("upload_width",s.outputWidth).set("upload_height",s.outputHeight));var g=u===null;n.getFile().filename=t.name,this.$10(t,u||t,g,(e||(e=r("performanceNow")))()-l,n.getAdditionalData().get("original_width"),n.getAdditionalData().get("original_height"),n.getAdditionalData().get("upload_width"),n.getAdditionalData().get("upload_height"))}catch(n){var h=r("getErrorSafe")(n),y=(e||(e=r("performanceNow")))()-l;this.$11(t,u||t,h,y)}a(n)},n.$22=function(t){return!!t.files&&r("AsyncUploadRequest").isSupported()},t})();l.default=u}),98);