;/*FB_PKG_DELIM*/

__d("CometRecordProductUsageMutationMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9465777806862135"}),null);
__d("CometRecordProductUsageMutationMutation.graphql",["CometRecordProductUsageMutationMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"productID"},{defaultValue:null,kind:"LocalArgument",name:"productIdentifier"}],t=[{kind:"Literal",name:"app_id",value:0x7e36f3fcc43bc},{kind:"Variable",name:"product_id",variableName:"productID"},{kind:"Variable",name:"product_identifier",variableName:"productIdentifier"}],r={alias:null,args:null,kind:"ScalarField",name:"product_identifier",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"last_used_time",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometRecordProductUsageMutationMutation",selections:[{alias:null,args:t,concreteType:"ProductUsageRecord",kind:"LinkedField",name:"update_last_used_time_for_product",plural:!1,selections:[r,o],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometRecordProductUsageMutationMutation",selections:[{alias:null,args:t,concreteType:"ProductUsageRecord",kind:"LinkedField",name:"update_last_used_time_for_product",plural:!1,selections:[r,o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("CometRecordProductUsageMutationMutation_facebookRelayOperation"),metadata:{},name:"CometRecordProductUsageMutationMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CometRecordProductUsageMutation",["CometRecordProductUsageMutationMutation.graphql","CometRelay","CometRelayErrorHandling","JSScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("CometRecordProductUsageMutationMutation.graphql");function c(e,t,n){(s||(s=r("JSScheduler"))).scheduleLoggingPriCallback(function(){o("CometRelay").commitMutation(e,{mutation:u,onError:function(t){o("CometRelayErrorHandling").markErrorAsHandled(t)},variables:{productID:n,productIdentifier:t}})})}var d={updateProductUsage:c},m=d;l.default=m}),98);
__d("DirectMessagingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2051"),s=o("FalcoLoggerInternal").create("direct_messaging",e),u=s;l.default=u}),98);
__d("LiveVideoCometNuxForCVCQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9844696545637976"}),null);
__d("LiveVideoCometNuxForCVCQuery.graphql",["LiveVideoCometNuxForCVCQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nuxID"},{defaultValue:null,kind:"LocalArgument",name:"videoID"}],t=[{kind:"Variable",name:"nux_id",variableName:"nuxID"}],r={kind:"InlineFragment",selections:[{args:null,documentName:"LiveVideoCometNuxForCVCQuery",fragmentName:"LiveVideoCometNuxForCVCInternal_nux",fragmentPropName:"nux",kind:"ModuleImport"}],type:"DefaultNUX",abstractKey:null},o=[{kind:"Variable",name:"id",variableName:"videoID"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LiveVideoCometNuxForCVCQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[r],storageKey:null},{alias:null,args:o,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"LiveVideoCometNuxForCVCInternal_video"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LiveVideoCometNuxForCVCQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,a],storageKey:null},{alias:null,args:o,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_premiere",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_audio_room_v2_broadcast",storageKey:null},a],storageKey:null}]},params:{id:n("LiveVideoCometNuxForCVCQuery_facebookRelayOperation"),metadata:{},name:"LiveVideoCometNuxForCVCQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("LiveVideoCometNuxForCVC.react",["CometPlaceholder.react","CometRelay","LiveVideoCometNuxForCVCQuery.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e!==void 0?e:e=n("LiveVideoCometNuxForCVCQuery.graphql");function d(e){var t=o("react-compiler-runtime").c(5),n=e.videoID,a=o("CometRelay").useLazyLoadQuery(c,{nuxID:8030,videoID:n}),i;t[0]!==a.video?(i={video:a.video},t[0]=a.video,t[1]=i):i=t[1];var l;return t[2]!==a.nux||t[3]!==i?(l=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"LiveVideoCometNuxForCVCInternal",children:u.jsx(o("CometRelay").MatchContainer,{match:a.nux,props:i})}),t[2]=a.nux,t[3]=i,t[4]=l):l=t[4],l}l.default=d}),98);
__d("MWChatSearchSurfaces",["LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s={broadcast:(e||(e=o("LSIntEnum"))).ofNumber(6),cmCommunityInviteAllMembers:e.ofNumber(21),cmCommunityInviteFbFriends:e.ofNumber(22),cmInviteAllMembers:e.ofNumber(14),cmInviteFbFriends:e.ofNumber(20),cmMemberList:e.ofNumber(16),cmThreadParticipantSearch:e.ofNumber(17),instagramAll:e.ofNumber(15),omnipicker:e.ofNumber(5),omnipickerArmadillo:e.ofNumber(11),universal:e.ofNumber(1)},u=s;l.default=u}),98);
__d("MWChatSearchFilteringUtils",["I64","LSMessagingThreadTypeUtil","MAWVerifyThreadCutover","MWChatSearchResultType","MWChatSearchSurfaces","MessengerMSplitFlag","hasDefaultThreadOneToOneCapability"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=e.map(function(e){return e.searchSource==="server"?!1:!!(d(e,t)||c(e))}),r=e.filter(function(e,t){return n[t]===!1});return r}async function u(e,t,n,r,o){n===void 0&&(n=!1),r===void 0&&(r=!0),o===void 0&&(o=!1);var a=e;if(n&&(a=e.filter(function(e){var t=e.key,n=e.rawData;return n.isE2EE})),t==null)return a;var i=await Promise.all(a.map(async function(e){return!(await g(e,t)||await h(e,t,n,r)||o&&e.rawData.isAiBot===!0||p(e)||m(e)||C(e))})),l=e.filter(function(e,t){return i[t]});return l}function c(e){return e.isContact===!0&&e.isViewerUnconnected===!0}function d(e,t){return t===r("MWChatSearchSurfaces").instagramAll?!1:e.isInstagramAccount===!0}function m(e){var t=e.rawData,n=t.canViewerMessage,r=t.isRestrictedByViewer;return r!==!0&&n===!1}function p(e){var t=e.rawData,n=t.isAiBot,o=t.isViewerUnconnected;return n!==!0?!1:r("MessengerMSplitFlag").is_msplit_account||o!==!1}function _(e){var t=[],n=new Set;return e.forEach(function(e){n.has(e.key)||(t.push(e),n.add(e.key))}),t}function f(e,t){return t!=null?o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType):e!=null?e.isE2EE===!0:!1}async function g(t,n){var a=t.rawData,i=a.defaultE2eeThreadOneToOne,l=a.id,s=a.isE2EE,u=a.otherUserId,c=a.threadType;return!s||c==null||!o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(c)?!1:i===!0?!0:await r("hasDefaultThreadOneToOneCapability")((e||(e=o("I64"))).of_string_opt(u!=null?u:l),n)}function h(e,t,n,r){return r===void 0&&(r=!0),n?Promise.resolve(!1):r?y(e,t):Promise.resolve(!1)}async function y(t,n){var a=t.rawData;if(a.resultType!==r("MWChatSearchResultType").GROUP||n==null)return!1;var i=a.hasCutoverThread,l=a.isE2EE,s=a.otherUserId;if(!l)return!1;if(s!=null){if(i===!0)return!0;var u=await o("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(n),(e||(e=o("I64"))).of_string(s));return u}return!1}function C(e){var t=e.rawData.isRestrictedByViewer;return t===!0}l.filterLocalSearchResults=s,l.filterSearchResults=u,l.dedupeByThreadKey=_,l.getIsE2ee=f}),98);
__d("MWThreadCreationUtil",["FBLogger","I64","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWVerifyThreadCutover","MWChatSearchFilteringUtils","MWChatSearchResultType","ReQL","ReQLSuspense","gkx","isTlcSearchEnabled","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useCallback,m=c.useMemo,p=10;function _(e,t){var n=v(e),r=o("ReQLSuspense").toArray(o("ReQL").fromTableAscending(t.tables.participants,["contactId","threadKey"]).filter(function(e){return n.has((s||(s=o("I64"))).to_string(e.contactId))}).map(function(e){return[(s||(s=o("I64"))).to_string(e.threadKey),s.to_string(e.contactId)]}),i.id+":51"),a=[],l=new Map;return r!=null&&r.forEach(function(t){var n=l.get(t[0]),r=n!=null?n+1:1;l.set(t[0],r),r===e.length&&a.push(t[0])}),a}function f(e,t,n){var a=!1;return r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.tables.threads.index("lastActivityTimestampMs")).filter(function(t){return e.includes((s||(s=o("I64"))).to_string(t.threadKey))&&t.threadName==null})).then(function(e){e!=null&&(a=!0,n(o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)))}).catch(function(e){r("FBLogger")("messenger_web_creation").mustfix("Issue getting and navigating to the most recent thread",e)})),a}function g(e,t){var n=o("react-compiler-runtime").c(14),r;n[0]!==e||n[1]!==t.tables.contacts?(r=function(){return o("ReQL").fromTableAscending(t.tables.contacts).filter(function(t){return e.has((s||(s=o("I64"))).to_string(t.id))})},n[0]=e,n[1]=t.tables.contacts,n[2]=r):r=n[2];var a;n[3]!==e||n[4]!==t?(a=[e,t],n[3]=e,n[4]=t,n[5]=a):a=n[5];var l=o("ReQLSuspense").useArray(r,a,i.id+":118"),u;n[6]!==l?(u=l.map(h),n[6]=l,n[7]=u):u=n[7];var c=u,d;n[8]!==c||n[9]!==e?(d=new Set(Array.from(e).filter(function(e){return!c.includes(e)})),n[8]=c,n[9]=e,n[10]=d):d=n[10];for(var m=d,p=!0,_=0;_<l.length;_++)if(l[_]!=null){var f=o("LSContactBitOffset").has(80,l[_]);if(!f){p=!1;break}}var g;return n[11]!==p||n[12]!==m?(g=[p,m],n[11]=p,n[12]=m,n[13]=g):g=n[13],g}function h(e){return(s||(s=o("I64"))).to_string(e.id)}function y(e,t){var n=o("react-compiler-runtime").c(14),r;n[0]!==e||n[1]!==t.tables.server_search_results?(r=function(){return o("ReQL").fromTableAscending(t.tables.server_search_results).filter(function(t){return e.has(t.resultId.toString())})},n[0]=e,n[1]=t.tables.server_search_results,n[2]=r):r=n[2];var a;n[3]!==e||n[4]!==t?(a=[e,t],n[3]=e,n[4]=t,n[5]=a):a=n[5];var l=o("ReQLSuspense").useArray(r,a,i.id+":164"),s;n[6]!==l?(s=l.map(C),n[6]=l,n[7]=s):s=n[7];var u=s,c;n[8]!==e||n[9]!==u?(c=new Set(Array.from(e).filter(function(e){return!u.includes(e)})),n[8]=e,n[9]=u,n[10]=c):c=n[10];for(var d=c,m=!0,p=0;p<l.length;p++)if(l[p]!=null&&(l[p].defaultE2eeThreads===null||l[p].defaultE2eeThreads===!1)){m=!1;break}var _;return n[11]!==m||n[12]!==d?(_=[m,d],n[11]=m,n[12]=d,n[13]=_):_=n[13],_}function C(e){return e.resultId.toString()}function b(e,t){var n=o("react-compiler-runtime").c(7),a;n[0]!==e?(a=v(e),n[0]=e,n[1]=a):a=n[1];var i=a,l=g(i,t),s=l[0],u=l[1],c=y(u,t),d=c[0],m=c[1],p;return n[2]!==s||n[3]!==d||n[4]!==m||n[5]!==u?(p=function(){return r("gkx")("5338")?u.size===0||!s?s:m.size===0?d:(r("FBLogger")("messenger_web_creation").warn("Tokens not in the Contacts table or Server Search Results table"),!1):!1},n[2]=s,n[3]=d,n[4]=m,n[5]=u,n[6]=p):p=n[6],p}function v(e){var t=new Set;return e.forEach(function(e){var n=e.rawData.otherUserId!=null?e.rawData.otherUserId:e.key;t.add(n)}),t}function S(e){return e.rawData.hasCutoverThread===!0||R()&&e.rawData.defaultE2eeThreadOneToOne===!0}function R(){return r("isTlcSearchEnabled")()}async function L(e,t,n){var a=o("MWChatSearchFilteringUtils").getIsE2ee(e.rawData);if(a)return{isSecureThread:!0,reason:"e2ee"};var i=e.rawData.id,l=e.rawData.hasCutoverThread===!0||e.rawData.defaultE2eeThreadOneToOne===!0,u="not_touched";e.rawData.isContact||e.rawData.resultType===r("MWChatSearchResultType").USER?u=await o("MAWVerifyThreadCutover").verifyContactCutoverOrDefaultE2EEWhenReady(Promise.resolve(n),t,(s||(s=o("I64"))).of_string(i)):await o("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(n),(s||(s=o("I64"))).of_string(i))&&(u="cutover");var c=u!=null;if(u!=="not_touched"&&l!==c&&r("FBLogger")("messenger_web").warn("Inconsistency for cutover or default e2ee status found and covered by the fix: cutoverOrDefaultE2eeType after the fix is %s",u),u==="cutover"||u==="on_demand_cutover")return{isSecureThread:!0,reason:u};var d=S(e)||u==="default_e2ee";if(d){var m=await o("MAWVerifyThreadCutover").getCutoverThread(Promise.resolve(n),(s||(s=o("I64"))).of_string(e.rawData.id));return m!=null&&r("FBLogger")("messenger_web").warn("Cutover thread inconsistency: default e2ee thread created but still would have been treated as new thread"),{defaultE2eeThreadCreated:m!=null,isSecureThread:!0,reason:"default_e2ee"}}return{isSecureThread:!1}}async function E(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(e.key)));return n}function k(e,t){return e!==r("MWChatSearchResultType").GROUP?t?(u||(u=o("LSIntEnum"))).ofNumber(15):(u||(u=o("LSIntEnum"))).ofNumber(1):t?(u||(u=o("LSIntEnum"))).ofNumber(16):(u||(u=o("LSIntEnum"))).ofNumber(2)}function I(e,t,n,r,o,a){e.openTabOrInbox({clientThreadKey:t,threadKey:n,threadType:k(r,o)},"search",void 0,a)}l.E2EE_GROUP_SIZE_LIMIT=p,l.getExistingThreadsWithTheTokens=_,l.maybeUpdateIsSecureBasedOnUnnamedRecentThread=f,l.useCheckE2EEligibilityForEachContact=b,l.passesWebSearchDefaultE2eeThreadCreationGating=R,l.getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2=L,l.checkIfThreadExistsInThreadTable=E,l.navigateToThread=I}),98);
__d("getMAWCanThreadBeCutoverOnDemand",["I64","LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","MWPreloadableQueries","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n){if(t.isTargetE2E===!0||t.targetType!=="USER")return!1;var r=(e||(e=o("I64"))).of_string(t.targetID),a=await Promise.resolve(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(r))),i=a!=null&&o("LSContactBitOffset").has(76,a);if(!i)return!1;var l=await Promise.resolve(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(r))),s=l?o("LSMessagingThreadTypeUtil").isOpenOneToOne(l.threadType):!1;if(!s)return!1;var u=await Promise.resolve(o("ReQL").firstAsync(o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,r)));if(u)return!1;var c=await o("MAWThreadCutover").isCutoverThreadKey(r);return!c}l.default=s}),98);
__d("MaybeTriggerOnDemandCutover",["FBLogger","I64","MAWCreateAndWaitForAuthoritativeOneToOneThread","MAWOnDemandCutoverQPLLogger","MAWOnDemandCutoverTrigger","getErrorSafe","getMAWCanThreadBeCutoverOnDemand"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a){var i=await r("getMAWCanThreadBeCutoverOnDemand")(t,n);if(i){var l=(e||(e=o("I64"))).of_string(t.targetID);o("MAWOnDemandCutoverTrigger").triggerOnDemandCutover(n,l,a);var s=babelHelpers.extends({},t);try{s.targetID=(e||(e=o("I64"))).to_string(await new Promise(function(e){r("MAWCreateAndWaitForAuthoritativeOneToOneThread")(n,l,"maybeTriggerOnDemandCutover",function(t){o("MAWOnDemandCutoverQPLLogger").addPoint(l,"secure_thread_created"),e(t)})})),s.isTargetE2E=!0}catch(e){var u=r("getErrorSafe")(e);r("FBLogger")("messenger_web").mustfix("Failed to get cutover thread for forward/sharing: %s",u.message)}return Promise.resolve(s)}}l.default=s}),98);
__d("MaybeUpdateTargetBasedOnDefaultE2eeEligibility",["FBLogger","I64","MAWCreateAndWaitForAuthoritativeOneToOneThread","MWThreadCreationUtil","ensureContactsExistAndUpdatedSync","hasDefaultThreadOneToOneCapability"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a){if(t.isTargetE2E===!0||t.targetType!=="USER")return Promise.resolve(t);var i=(e||(e=o("I64"))).of_string(t.targetID);await r("ensureContactsExistAndUpdatedSync")(n,a,i);var l=await r("hasDefaultThreadOneToOneCapability")(i,n),s=babelHelpers.extends({},t);if(o("MWThreadCreationUtil").passesWebSearchDefaultE2eeThreadCreationGating()&&l)try{s.targetID=(e||(e=o("I64"))).to_string(await new Promise(function(e){r("MAWCreateAndWaitForAuthoritativeOneToOneThread")(n,i,"maybeUpdateTargetBasedOnDefaultE2eeEligibility",function(t){return e(t)})})),s.isTargetE2E=!0}catch(e){r("FBLogger")("messenger_web").mustfix("Failed to create e2ee thread for forward/sharing",e)}return Promise.resolve(s)}l.maybeUpdateTargetBasedOnDefaultE2eeEligibility=s}),98);
__d("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EE",["I64","MaybeTriggerOnDemandCutover","MaybeUpdateTargetBasedOnDefaultE2eeEligibility","ensureContactsExistAndUpdatedSync","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a,i,l,s){var u,c=await n;o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_ensure_contact_exists_start");var d=function(t){o("sendToSentQPLLogger").markSendToSentPoint(l,t)};await r("ensureContactsExistAndUpdatedSync")(c,a,(e||(e=o("I64"))).of_string(t.targetID),d,s),o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_ensure_contact_exists_end"),o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_trigger_on_demand_cutover_start");var m=(u=await r("MaybeTriggerOnDemandCutover")(t,c,i))!=null?u:t;return o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_trigger_on_demand_cutover_end"),m.targetID===t.targetID&&(o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_update_target_based_on_eligibility_start"),m=await o("MaybeUpdateTargetBasedOnDefaultE2eeEligibility").maybeUpdateTargetBasedOnDefaultE2eeEligibility(t,c,a),o("sendToSentQPLLogger").markSendToSentPoint(l,"update_target_maybe_update_target_based_on_eligibility_end")),m}l.default=s}),98);
__d("logCometWatchTabSelectedEvent",["VideoHomeTypedLiteLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){r("VideoHomeTypedLiteLogger").log({click_point:e,entry_point_type:n,event:"video_tab_selected",event_target:"watch_home_www",tab_selection_type:"user_initiated_click",was_badged:t})}l.default=e}),98);